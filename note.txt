npm run deploy
glt ì˜¬ë¦¬ê¸°

20240810
.
1 [ğŸ”¥ 2023 Update ğŸ”¥] Introduction.
íŒŒì´ì–´ë² ì´ìŠ¤ ëŒ€í•œ ì„¤ëª…
2 [ğŸ”¥ 2023 Update ğŸ”¥] Setup
í™˜ê²½ì„¤ì •
.0 Installation
nwitter-reloaded
í”„ë¡œì­íŠ¸ëª…
npx create-react-app nwitter-reloaded
react
íƒ€ì„ìŠ¤í¬ë¦½íŠ¸ -swc

npm run dev
ì‹¤í–‰

https://github.com/Ncoding2023/nwitter-reloaded.git
Git ì£¼ì†Œ

npm create vite@latest
npm i react-router-dom@6.14.2

npm i styled-reset
npm i styled-components@6.0.7 
npm i @types/styled-components -D

Git init 
Git ì—°ê²°

git remote add origin https://github.com/Ncoding2023/nwitter-reloaded.git
í•´ë‹¹ urlì— ì €ì¥

20240813
.1 Routing
extensions => vscode-styled-components ë‹¤ìš´ë¡œë“œ
npm i gh-pages
ë¸ŒëŸ°ì¹˜ ì„¤ì¹˜


package.jsonì— ì„ ì–¸
 "deploy": "gh-pages -d build",
 ë§ˆì§€ë§‰ ì¤„
,
  "homepage": "https://Ncoding2023.github.io/react_beginner"
   - í•´ë‹¹ urlë¡œ ë³€ê²½

.2 LoadingScreen
// wait for firebase
    setTimeout(() => setIsLoading(false),2000);
    ë¡œë”©,2ì´ˆ ì£¼ê³  ì‹¤í–‰

2.3 Firebase Project
íŒŒì´ì–´ë² ì´ìŠ¤ íšŒì›ê°€ì… ë° ìŠ¤í¬ë¦½íŠ¸ ê°€ì ¸ì˜¤ê¸°
3.0 Setup 
íŒŒì´ì–´ë² ì´ìŠ¤ í™˜ê²½ì„¤ì •
3.1 Forms and UI
extensions => ES7+ React/Redux/React-Native snippets ë‹¤ìš´ë¡œë“œ
ì›¹ì—ì„œ ì—ëŸ¬ ì•„ì´ì½˜ í‘œì‹œ -> ë³€í™”ê°€ ì—†ë‹¤...
ìŠ¤íƒ€ì¼ ì‘ì„±

20240815ë¦¬ì•¡íŠ¸ 
3.2 Create Account
credentials
HTTP ìš”ì²­ ì‹œ ì¿ í‚¤ë‚˜ ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í• ì§€ ì—¬ë¶€ë¥¼ ì œì–´í•˜ëŠ” ì„¤ì •
ë³´ì•ˆê³¼ ì¸ì¦ëœ ì„¸ì…˜ ê´€ë¦¬ì—ì„œ ì¤‘ìš”í•œ ì—­í• 
useNavigate
ë¦¬ì•¡íŠ¸ ë¼ìš°í„°(React Router)ì—ì„œ ì‚¬ìš©ë˜ëŠ” í›…ìœ¼ë¡œ, ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ í˜ì´ì§€ ì´ë™(ë„¤ë¹„ê²Œì´ì…˜)ì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©

íŒŒì´ì–´ë² ì´ìŠ¤ Authenticationì—ì„œ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¡œ,
createUserWithEmailAndPassword
 ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•´ ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ë“±ë¡í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰
updateProfile
 ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì •ë³´(ì˜ˆ: ì´ë¦„, ì‚¬ì§„ URL ë“±)ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° ì‚¬ìš©

3.3 Protected Routes
add Protected-route
children
ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§í•  ë•Œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ìì‹ ìš”ì†Œë“¤ì„ ê°€ë¦¬í‚¤ëŠ” íŠ¹ë³„í•œ prop
ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ê°ì‹¸ê³  ìˆëŠ” ìì‹ ì»´í¬ë„ŒíŠ¸ë‚˜ ìš”ì†Œë“¤ì„ ìœ ì—°í•˜ê²Œ ë Œë”ë§
Navigate
ë¦¬ì•¡íŠ¸ ë¼ìš°í„°(React Router)ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ, 
íŠ¹ì • ê²½ë¡œë¡œ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜í•  ë•Œ ì‚¬ìš©í•˜ë©°,
 í˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ì§€ ì•Šê³  ì‚¬ìš©ìë¥¼ ìë™ìœ¼ë¡œ ë‹¤ë¥¸ ê²½ë¡œë¡œ ì´ë™ì‹œí‚¤ëŠ” ë° ìœ ìš©

3.4 Log In
add auth-components.ts
.tsíŒŒì¼ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ë§Œ ì‚¬ìš©ê°€ëŠ¥

create-account.tsxë¥¼ login.tsxì— ë³µì‚¬í•˜ë©°
nameê´€ë ¨ë§Œ ì œê±°
3.5 Github Login
íŒŒì´ì–´ë² ì´ìŠ¤ì—ì„œ githubì™€ ì—°ë™
https://github.com/settings/applications

Application name*
Nwitter-Reloaded!
Homepage URL*
https://nwitter-reloaded-51a15.firebaseapp.com/
Authorization callback URL*
https://nwitter-reloaded-51a15.firebaseapp.com/__/auth/handler
ì²´í¬ ì—†ìŒ

Client ID
Ov23li0WYrAznD4mUe1r
Client secrets - ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ ë°œê¸‰
c248ddd815886a6237a0503848745e7921d36c25

add github-mark.svg
add github-bts.tsx
GithubButton()
signInWithPopupìœ¼ë¡œ ì—°ë™ ë° ì—°ê²°

3.6 Recap 
íŒŒì´ì–´ ë² ì´ìŠ¤ì—ì„œ íƒ€ í™ˆí˜ì´ì§€ ê³„ì •ì„ ì—°ë™í• ë•Œ ê° íšŒì‚¬ ëª…ìœ¼ë¡œ í•¨ìˆ˜ë¡œ
 ì‘ì„±í•˜ë©° importëì— cordovaê°€ ì•„ë‹Œ ê²ƒìœ¼ë¡œ ì—°ë™ *ì£¼ì˜
ì½”ë“œ ì±Œë¦°ì§€
sendPasswordResetEmail ì‚¬ìš©
ì´ë©”ì¼ë¡œ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •í•˜ëŠ” ë²„íŠ¼ ì¶”ê°€
ì³‡ì§€í”¼í‹°ë¥¼ ì‚¬ìš©í•˜ë©° ìŠ¤íƒ€ì¼ ë¶€ë¶„ì€ ë‹¤ë¥¸ ë²„ì „ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.
togglePopupìœ¼ë¡œ êµ¬í˜„í•˜ë©° ì£¼ë¡œ ìŠ¤íƒ€ì¼ ë¶€ë¶„ ì‘ì—…
add pwresetemil-btn.tsx 
pwresetemil-btn ì½”ë“œì±Œë¦°ì§€ì´ë¯€ë¡œ ì¼ë‹¨ ì£¼ì„ì²˜ë¦¬

20240820
4.0 Navigation Bar 
Heroicons
https://heroicons.dev
ë¦¬ì•¡íŠ¸ ì•„ì´ì½˜ ì‚¬ì´íŠ¸

LogOutê¸°ëŠ¥ì„ home.tsxì—ì„œ layout.tsxë¡œ ë³€ê²½


4.1 Post Tweet Form
accept ì†ì„±
ê³ ìœ  íŒŒì¼ ìœ í˜• ì§€ì •ìì˜ ëª©ë¡ì…ë‹ˆë‹¤.
image/*ëŠ” "ëª¨ë“  ì´ë¯¸ì§€ íŒŒì¼"ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
audio/*ëŠ” "ëª¨ë“  ì˜¤ë””ì˜¤ íŒŒì¼"ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
video/*ëŠ” "ëª¨ë“  ë¹„ë””ì˜¤ íŒŒì¼"ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

add post-tweet-form.tsx
ê¸€ì‘ì„± ë° ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ
layout.tsxì—ì„œ errë‚˜ì„œ ì£¼ì„ ì²˜ë¦¬
dataSlot="icon"

4.2 Tweeting to Firestore
íŒŒì´ì–´ë² ì´ìŠ¤ì—ì„œ Cloud Firestore,storage ë“±ë¡ í›„
add firebase.ts
import { getFirestore } from "firebase/firestore";
import { getStorage } from "firebase/storage";
ì¶”ê°€

post-tweet-form.tsx
add onSubmit
í¬ìŠ¤íŠ¸ ì‘ì„±ì‹œ íŒŒì´ì–´ë² ì´ìŠ¤ì— ë“±ë¡


20240822
4.3 Uploading Images
post-tweet-form.tsx
add
const locationRef
const result = await uploadBytes(locationRef, file);
const url = await getDownloadURL(result.ref);
updateDoc(doc, { photo: url, });
ì£¼ìš” íŠ¹ì§•
ë¶€ë¶„ ì—…ë°ì´íŠ¸: updateDocì€ ê¸°ì¡´ ë¬¸ì„œì˜ ì¼ë¶€ í•„ë“œë§Œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¸ì„œ ì „ì²´ë¥¼ ë®ì–´ì“°ì§€ ì•Šê³  ë³€ê²½í•˜ê³ ì í•˜ëŠ” ë¶€ë¶„ë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ìƒˆ í•„ë“œ ì¶”ê°€: ì—…ë°ì´íŠ¸í•  ë•Œ ë¬¸ì„œì— ì—†ëŠ” ìƒˆë¡œìš´ í•„ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•„ë“œ ì‚­ì œ: í•„ë“œë¥¼ ì‚­ì œí•˜ë ¤ë©´ deleteField() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ í•„ë“œë¥¼ nullë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4.4 Fetching Timeline
pwresetemil-btn.tsx- update(err 8ê°œë¼ txtë¡œ ìˆ˜ì •) 
pwresetemil-btn.tsx.txt 

ì‘ì—…ì´ ëë‚˜ë©´ ì €ì¥ ê¼­í•  ê²ƒ
add
timeline.tsx
tweet.tsx

timeline.tsx
tweetì»´í¬ë„ŒíŠ¸(íƒœê·¸)ë¥¼ mapë°©ì‹ìœ¼ë¡œ ì‘ì„±í•œ ê²Œì‹œë¬¼ í‘œì‹œ
firebase/firestoreì—ì„œ import
const tweetsQuery = query(
      collection(db, "tweets"),
      orderBy("createdAt", "desc")

tweet.tsx
timeline.tsxì—ì„œ mapë°©ì‹ìœ¼ë¡œ ê°’ì„ ë°›ì•„ì„œ ì¶œë ¥

4.5 Realtime Tweets
ì‹¤ì‹œê°„ìœ¼ë¡œ í‘œì‹œ
onSnapshot ë¬´ë£Œ í• ë‹¹ëŸ‰ì´ ë¹¨ë¦¬ ì†Œëª¨ë¨. ì£¼ì˜
timeline.tsx
add

let unsubscribe : Unsubscribe | null = null;
onSnapshot ë¬´ë£Œ í• ë‹¹ëŸ‰ì´ ë¹¨ë¦¬ ì†Œëª¨ë¨. ì£¼ì˜

4.6 Deleting Tweets
ì‚­ì œ
update
post-tweet-form.tsx
const locationRef = ref(storage, `tweets/${user.uid}/${doc.id}`);
add
tweet.tsx
ì‚­ì œë²„íŠ¼ ì¶”ê°€ 

20240824
4.7 CodeChallenge_Edit
add
edit-tweet-form.tsx
Editë²„íŠ¼

post-tweet-form.tsx
tweet.tsx
timeline.tsx
ì„¸ íŒŒì¼ì„ ì°¸ê³ 
ìˆœë²ˆ)home-> post-tweet-form, timeline
timeline -> tweet -> edit-tweet-form


ë‹¤ë¥¸ì‚¬ëŒ ì‘í’ˆ ì°¸ê³ í•˜ê³  ì½”ë”©í•¨.
https://github.com/codribble/nwitter-reloaded/commit/cf7b9d503bf4bb15fdfabedf545c72c559eafd4a


5.0 User Avatar
í”„ë¡œí•„ ì‚¬ì§„ ì¶”ê°€
update
profile.tsx
ì‚¬ì§„ ì—…ë¡œë“œ ì‘ì—…

5.1 User's Timeline
where("userId", "==", user?.uid) ì¡°ê±´ìœ¼ë¡œ í‚¤ê°’ ì„ íƒí•˜ë©° 
ê°œë°œì ëª¨ë“œì—ì„œ err ë§í¬ë¡œ ì´ë™í•˜ì—¬ í‚¤ê°’ saveí•˜ì—¬ firebaseì—ì„œ ì„¤ì •
timeline.tsxì—ì„œ ì˜¤íƒ€ ìˆ˜ì •


5.2 CodeChallenge_nameEdit
ë‹‰ë„¤ì„ ìˆ˜ì •
add edit-name-form.tsx
updateProfile
updateDoc
ì°¨ì´ì 
updateProfile: ì‚¬ìš©ì ì¸ì¦ê³¼ ê´€ë ¨ëœ í”„ë¡œí•„ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë¡œ, Firebase Authenticationì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
ê¸°ë³¸ í•„ë“œ(displayName, photoURL)ë§Œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
updateDoc: Firestore ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë¬¸ì„œì˜ íŠ¹ì • í•„ë“œë¥¼ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ì…ë‹ˆë‹¤.


6.0 Firebase Hosting
íŒŒì´ì–´ë² ì´ìŠ¤ ë° ê¹ƒí—ˆë¸Œ ì—°ê²°  
npm run deploy
íŒŒì´ì–´ë² ì´ìŠ¤ ë° ê¹ƒí—ˆë¸Œ  ë°°í¬
ë¹Œë“œë•œì— ìˆ˜ì •
https://nwitter-reloaded-51a15.web.app/
ë°°í¬ì‚¬ì´íŠ¸


6.1 Security Rules
íŒŒì´ì–´ë² ì´ìŠ¤ì—ì„œ í´ë¼ìš°ë“œ ë° ìŠ¤í† ë¦¬ì§€ì—ì„œ ê·œì¹™ ì‘ì„±
https://console.firebase.google.com/project/nwitter-reloaded-51a15/firestore/databases/-default-/rules?hl=ko
https://console.firebase.google.com/project/nwitter-reloaded-51a15/storage/nwitter-reloaded-51a15.appspot.com/files?hl=ko
íŒŒì´ì–´ë² ì´ìŠ¤ì—ì„œë§Œ ì‘ì—…

6.2 API Key Security
https://console.cloud.google.com/apis/credentials
ì—¬ê¸°ë¡œ ì´ë™

https://nwitter-reloaded-51a15.web.app/
ì£¼ì†Œê°’ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë¡œì»¬ì—ì„œ ë¡œê·¸ì¸ ì°¨ë‹¨ ë³´ì•ˆì„± í–¥ìƒ
Firebase: Error (auth/requests-from-referer-http://localhost:5173-are-blocked.).

Note: It may take up to 5 minutes for your settings to take effect.
ì„¤ì •ì‹œ 5ë¶„ì •ë„ ê±¸ë¦¼
ì²´í¬í‘œì‹œìˆìœ¼ë©´ ë³´ì•ˆì„¤ì • ì™„ë£Œìƒíƒœ

6.3 Conclusions
ì½”ë“œì±Œë¦°ì§€ - ì—†ìŒ


